on:
   workflow_dispatch:
   schedule:
      - cron: "0 15 * * *" # runs everyday at 3:00pm
jobs:
   update_readme:
      runs-on: ubuntu-latest
      permissions:
        contents: write
        pull-requests: write
      steps:
         - uses: actions/checkout@v2
         
         - name: Get Youtube Videos
           uses: pmqueiroz/readme-last-youtube-videos@main
           env:
              YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}
           with:
              channel_id: "UCSf9uWEmXyOw4lfyPzpnYAA"
         
         - name: Pull latest changes
           run: |
             git config --global user.name "github-actions[bot]"
             git config --global user.email "github-actions[bot]@users.noreply.github.com"
             git pull --rebase --strategy-option=theirs
         
         - name: Create Pull Request
           uses: peter-evans/create-pull-request@v5
           with:
             token: ${{ secrets.GITHUB_TOKEN }}
             commit-message: "chore: Update README with latest YouTube videos"
             branch: update-readme-with-youtube-videos
             title: "Update README with latest YouTube videos"
             body: |
               This pull request was created automatically by a GitHub Action.
               It updates the README with the latest YouTube videos from the specified channel.
               
